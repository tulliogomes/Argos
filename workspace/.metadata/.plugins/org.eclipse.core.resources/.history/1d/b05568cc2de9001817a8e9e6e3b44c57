<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<f:metadata>
	<f:viewParam name="id" value="#{usuarioBean.id}" />
	<f:viewParam name="nome" value="#{usuarioBean.nome}" />
	<f:viewParam name="email" value="#{usuarioBean.email}" />
	<f:viewParam name="telefone" value="#{usuarioBean.telefone}" />
	<f:viewParam name="perfil" value="#{usuarioBean.perfil}" />
	<f:viewParam name="editando" value="#{usuarioBean.editando}" />
</f:metadata>
<h:body>
	<ui:composition template="../template/template.xhtml">
		<ui:define name="ttitle">Usuário</ui:define>
		<ui:define name="tbody">

			<h:form>
				<h:inputHidden value="#{usuarioBean.id}"
				               id="id" />
				<p:tabView>
					<p:tab title="Cadastro de novo Usuário">
						<h:panelGrid id="grid" 
									 columns="4" 
									 style="width:100%;">
							<h:panelGrid rendered="#{not usuarioBean.editando}">
								<p:outputLabel for="matricula" 
								               value="Matrícula "
									           style="margin-top:5%" />
								  <p:inputText id="matricula" 
								               required="true"
									           requiredMessage="Informe a matrícula"
								     	       value="#{usuarioBean.matricula}" 
								     	       minLength="6"
									           maxlength="6">
							  <f:convertNumber integerOnly="true" 
						                       maxFractionDigits="0" />
								</p:inputText>
								<p:message for="matricula" 
								           display="text" 
								           showDetail="true" />
							</h:panelGrid>
							<h:panelGrid>
								<p:outputLabel for="nome" 
								               value="Nome " 
								               style="margin-top:5%" />
								  <p:inputText id="nome" 
								               required="true"
									           requiredMessage="Informe o nome" 
									           value="#{usuarioBean.nome}" />
								    <p:message for="nome"
								               display="text" 
								               showDetail="true" />
							</h:panelGrid>
							
						<h:panelGrid rendered="#{not usuarioBean.editando}">
							 <p:outputLabel for="senha" 
							                value="Senha " 
								            style="margin-top:5%" />
								<p:password id="senha" 
								            required="true"
									        requiredMessage="Informe a senha com 6 dígitos"
									        value="#{usuarioBean.senha}" 
									        minLength="6" 
									        maxlength="6" 
									        validatorMessage="Confirmação de senha não confere"
									        match="confirmacao"/>
							 	 <p:message for="senha" 
							 	            display="text" 
							 	            showDetail="true" />
							</h:panelGrid>
							
							<h:panelGrid rendered="#{not usuarioBean.editando}">
								<p:outputLabel for="confirmacao" value="Confirme a Senha "
									style="margin-top:5%" />
								<p:password 
								          id="confirmacao" 
								          required="true"
									      requiredMessage="Confirme a senha desejada com 6 dígitos"
									      value="#{usuarioBean.confirmacao}" 
									      minLength="6"
									      maxlength="6" />
								<p:message for="confirmacao" display="text" showDetail="true" />
							</h:panelGrid>
							
							<h:panelGrid rendered="#{not usuarioBean.editando}">
								<p:outputLabel for="nascimento" value="Nascimento " />
								<p:calendar 
								           id="nascimento" 
								           required="true"
								           value="#{usuarioBean.nascimento}"
									       pattern="dd-MM-yyyy"/>
								<p:message for="nascimento" 
								           display="text" 
								           showDetail="true" />
							</h:panelGrid>
							
							<h:panelGrid>
								<p:outputLabel for="fone" 
								               value="Telefone "
									           style="margin-top:5%" />
								  <p:inputMask id="fone" 
								               value="#{usuarioBean.telefone}"
									           required="true"
									           mask="(99) 9999-9999"
									           requiredMessage="Informe o telefone" />
								    <p:message for="fone" 
								               display="text" 
								               showDetail="true" />
							</h:panelGrid>
							
							<h:panelGrid>
								<p:outputLabel for="perfil" 
								               value="Perfil "
									           style="margin-top:5%" />
									           
								 <p:selectOneMenu id="perfil" 
								                  value="#{usuarioBean.perfil}"
									              style="width:200px;" 
									              required="true"
									              requiredMessage="Informe o Perfil.">
									<f:selectItem itemLabel="Selecione o perfil..." 
									              itemValue="" />
									<f:selectItem itemLabel="Usuário comum" 
									              itemValue="usuario" />
									<f:selectItem itemLabel="Usuário Administrador" 
									              itemValue="administrador" />
								</p:selectOneMenu>
								<p:message for="perfil" display="text" showDetail="true" />
							</h:panelGrid>
							
								<h:panelGrid>
								<p:outputLabel for="email" 
								               value="Email " 
								               style="margin-top:5%" />
								  <p:inputText id="email" 
								               required="true"
									           requiredMessage="Informe o Email" 
									           value="#{usuarioBean.email}"
									           validatorMessage="Formato de email inválido">
									           <f:validateRegex
		                                       pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
									           </p:inputText>
								    <p:message for="email" 
								               display="text" 
								               showDetail="true" />
							</h:panelGrid>
							
							<h:panelGrid></h:panelGrid>
							<h:panelGrid></h:panelGrid>
							<h:panelGrid></h:panelGrid>
							
							<h:panelGrid columns="2">
							<h:commandLink value="" 
							               action="#{usuarioBean.salvar}"
							               id="bt_salvar">
								           <i class="glyphicon glyphicon-floppy-saved" 
								              style="font-size:2em;
								              padding: 20px;
								              margin-top:30px; 
								              color:green">
								          </i> 
                            </h:commandLink>	
						    </h:panelGrid></h:panelGrid>
					</p:tab>
				</p:tabView>
				<h:messages errorStyle="color:red" infoStyle="color:blue"
					layout="table" />
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>
